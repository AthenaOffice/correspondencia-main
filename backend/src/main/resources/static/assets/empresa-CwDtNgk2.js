const c="http://localhost:8080";async function E(s,t,a,n){try{const o=[];n&&o.push(`novoStatus=${n}`),t&&o.push(`novaSituacao=${t}`),a!==void 0&&o.push(`novaMensagem=${encodeURIComponent(a)}`);const l=o.length?"?"+o.join("&"):"",r=`${c}/api/empresas/athena/alterar-empresa/modelo-athena/${s}${l}`,m=await fetch(r,{method:"PUT"});if(!m.ok)throw new Error("Erro ao alterar situação");return m.json()}catch(o){throw console.error(o),new Error("Erro ao alterar situação")}}async function w(s=50){try{let t=[],a=0;for(;;){const n=`${c}/api/empresas/athena/buscar-todos-registros?pageNumber=${a}&pageSize=${s}`,o=await fetch(n);if(!o.ok)break;const l=await o.json(),r=l.content??[];if(r.length===0&&a===0){for(t=[],a=0;;){const u=`${c}/api/empresas/conexa/buscar-todos-registros?pageNumber=${a}&pageSize=${s}`,i=await fetch(u);if(!i.ok)break;const p=await i.json(),h=p.data??[],d=h.map(e=>{var g;return{id:e.id??e.customerId??null,customerId:e.customerId??e.id??null,nomeEmpresa:e.nomeEmpresa??e.name??e.nome??null,cnpj:e.cnpj??((g=e.legalPerson)==null?void 0:g.cnpj)??null,email:e.email??e.emails??e.emailsMessage??null,telefone:e.telefone??e.phone??null,statusEmpresa:e.statusEmpresa??null,situacao:e.situacao??null,mensagem:e.mensagem??null,__raw:e}});t=t.concat(d);const f=p.totalPages??(h.length<s,a+1);if(a++,a>=f)break}break}t=t.concat(r.map(u=>({...u})));const m=l.totalPages??(r.length<s,a+1);if(a++,a>=m)break}return{content:t,pageNumber:0,pageSize:s,totalElements:t.length,totalPages:1,lastPage:!0}}catch(t){throw console.error("Erro buscarTodasEmpresas:",t),new Error("Erro ao buscar todas as empresas")}}export{E as alterarSituacaoEmpresa,w as buscarTodasEmpresas};
